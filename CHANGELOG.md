# HerEcho 项目修改记录

## 2025-05-18 Russo 聊天页面美化以及角色增加

### 1. 美化聊天页面
- 删去了不必要的代码
  - 删去了“收起时获取最新两条消息展示”的函数及相关前端代码

## 2025-05-18 Russo 叙梦系统实现

### 1. 添加了叙梦主页 (DreamHomeView.vue)
- 实现故事卡片列表展示
  - 支持显示故事封面、标题、描述
  - 添加进度显示功能（已完成章节/总章节）
  - 实现新故事标记和锁定状态显示
- 添加故事详情弹窗
  - 展示故事完整信息和进度
  - 提供"开始游戏"和"继续游戏"选项（但没有保存游戏进度）
  - 支持重新开始已进行的故事

### 2. 叙梦分镜场景系统 (DreamView.vue)
- 实现场景展示系统
  - 支持背景图片显示
  - 添加场景标题和描述展示
  - 实现选项列表和选项交互
- 独立数据管理（dreamStore）
  - 内容、跳转逻辑和程序逻辑分离，便于维护

### 待解决的：
- dreamview的样式还是有点丑，今晚先不改了


## 2025-05-18 Russo 聊天界面优化：虚拟键盘

### 1. 添加虚拟键盘功能
- 实现点击输入框时显示虚拟键盘样式
  - 添加完整的虚拟键盘布局
  - 键盘支持基本按键展示（纯UI，不含实际功能）
- 优化键盘弹出时的布局适配
  - 当聊天记录展开时，适当缩小聊天区域以留出键盘空间
  - 当聊天记录收起时，缩小背景图区域以适应键盘显示
  - 确保整体布局协调，不遮挡导航栏和输入框

### 2. 细节优化
- 改进消息选择选项区域
  - 添加文本溢出处理，防止长文本破坏布局
  - 确保选项面板与输入框宽度保持一致
- 优化键盘显示/隐藏的过渡动画
  - 添加平滑的高度变化过渡效果
  - 协调各组件之间的视觉关系


## 2025-05-17 Russo 聊天页面完善

### 1. 输入框逻辑完善
- 添加语音输入模式切换功能
  - 实现文字输入和语音输入模式之间的切换
  - 添加左侧图标切换（麦克风/键盘）
  - 添加录音状态反馈（动画和计时器）
- 实现模拟的语音消息发送功能
  - 添加按下/释放事件处理
  - 显示录音时长
  - 发送语音消息（当前为模拟实现）

### 2. 页面细节格式优化
- 修复底部导航栏长度与页面长度不匹配的问题
- 统一组件宽度
  - 为 ChatPage、ChatInput 和 BottomNav 组件添加一致的宽度限制
  - 确保所有组件水平居中对齐
- 修复聊天记录展开时与文字框之间出现黑色留空的问题，改进聊天记录容器展开收起实现方式
  - 使用固定高度替代之前的 flex 布局
  - 保持聊天记录的完整性，在收起状态下也支持查看所有历史消息
  - 删去了函数 latestUserMessage 、latestCharacterMessage，因为已经不需要获取了

