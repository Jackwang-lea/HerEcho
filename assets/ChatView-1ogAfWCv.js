import{d as g,e as w,l as E,u as J,c as n,o as t,a as e,k as _,t as L,_ as P,r as h,F as $,b as x,g as M,m as D,p as Q,v as W,q as X,w as O,s as Y,f as j,x as q,j as G,n as ee}from"./index-CDFdzjpW.js";import{B as se}from"./BottomNav-z8lJ3h66.js";const te=Array.prototype.slice;function l(c,f=null,s=null){return(arguments.length>3||E(s))&&(s=te.call(arguments,2)),w(c,f,s)}const ae=g({name:"RiAddCircleLine",props:{size:{type:String,default:"24px"},color:{type:String,default:"currentColor"},className:{type:String,default:""}},render(){return l("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:this.size,height:this.size,fill:this.color,class:["remixicon",this.className]},l("path",{d:"M11 11V7H13V11H17V13H13V17H11V13H7V11H11ZM12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20Z"}))}}),ie=g({name:"RiArrowLeftSLine",props:{size:{type:String,default:"24px"},color:{type:String,default:"currentColor"},className:{type:String,default:""}},render(){return l("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:this.size,height:this.size,fill:this.color,class:["remixicon",this.className]},l("path",{d:"M10.8284 12.0007L15.7782 16.9504L14.364 18.3646L8 12.0007L14.364 5.63672L15.7782 7.05093L10.8284 12.0007Z"}))}}),oe=g({name:"RiArrowUpSLine",props:{size:{type:String,default:"24px"},color:{type:String,default:"currentColor"},className:{type:String,default:""}},render(){return l("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:this.size,height:this.size,fill:this.color,class:["remixicon",this.className]},l("path",{d:"M11.9999 10.8284L7.0502 15.7782L5.63599 14.364L11.9999 8L18.3639 14.364L16.9497 15.7782L11.9999 10.8284Z"}))}}),ne=g({name:"RiDeleteBin2Line",props:{size:{type:String,default:"24px"},color:{type:String,default:"currentColor"},className:{type:String,default:""}},render(){return l("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:this.size,height:this.size,fill:this.color,class:["remixicon",this.className]},l("path",{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM13.4142 13.9997L15.182 15.7675L13.7678 17.1817L12 15.4139L10.2322 17.1817L8.81802 15.7675L10.5858 13.9997L8.81802 12.232L10.2322 10.8178L12 12.5855L13.7678 10.8178L15.182 12.232L13.4142 13.9997ZM9 4V6H15V4H9Z"}))}}),le=g({name:"RiKeyboardLine",props:{size:{type:String,default:"24px"},color:{type:String,default:"currentColor"},className:{type:String,default:""}},render(){return l("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:this.size,height:this.size,fill:this.color,class:["remixicon",this.className]},l("path",{d:"M3 17H21V19H3V17ZM3 11H6V14H3V11ZM8 11H11V14H8V11ZM3 5H6V8H3V5ZM13 5H16V8H13V5ZM18 5H21V8H18V5ZM13 11H16V14H13V11ZM18 11H21V14H18V11ZM8 5H11V8H8V5Z"}))}}),re=g({name:"RiMessage2Line",props:{size:{type:String,default:"24px"},color:{type:String,default:"currentColor"},className:{type:String,default:""}},render(){return l("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:this.size,height:this.size,fill:this.color,class:["remixicon",this.className]},l("path",{d:"M6.45455 19L2 22.5V4C2 3.44772 2.44772 3 3 3H21C21.5523 3 22 3.44772 22 4V18C22 18.5523 21.5523 19 21 19H6.45455ZM5.76282 17H20V5H4V18.3851L5.76282 17ZM11 10H13V12H11V10ZM7 10H9V12H7V10ZM15 10H17V12H15V10Z"}))}}),ce=g({name:"RiMic2Line",props:{size:{type:String,default:"24px"},color:{type:String,default:"currentColor"},className:{type:String,default:""}},render(){return l("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:this.size,height:this.size,fill:this.color,class:["remixicon",this.className]},l("path",{d:"M12.0001 3C10.3432 3 9.00008 4.34315 9.00008 6V12C9.00008 13.6569 10.3432 15 12.0001 15C13.6569 15 15.0001 13.6569 15.0001 12V6C15.0001 4.34315 13.6569 3 12.0001 3ZM12.0001 1C14.7615 1 17.0001 3.23858 17.0001 6V12C17.0001 14.7614 14.7615 17 12.0001 17C9.23865 17 7.00008 14.7614 7.00008 12V6C7.00008 3.23858 9.23865 1 12.0001 1ZM2.19238 13.9615L4.15392 13.5692C4.88321 17.2361 8.11888 20 12.0001 20C15.8813 20 19.1169 17.2361 19.8462 13.5692L21.8078 13.9615C20.8961 18.5452 16.8516 22 12.0001 22C7.14858 22 3.104 18.5452 2.19238 13.9615Z"}))}}),de=g({name:"RiMoreLine",props:{size:{type:String,default:"24px"},color:{type:String,default:"currentColor"},className:{type:String,default:""}},render(){return l("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:this.size,height:this.size,fill:this.color,class:["remixicon",this.className]},l("path",{d:"M4.5 10.5C3.675 10.5 3 11.175 3 12C3 12.825 3.675 13.5 4.5 13.5C5.325 13.5 6 12.825 6 12C6 11.175 5.325 10.5 4.5 10.5ZM19.5 10.5C18.675 10.5 18 11.175 18 12C18 12.825 18.675 13.5 19.5 13.5C20.325 13.5 21 12.825 21 12C21 11.175 20.325 10.5 19.5 10.5ZM12 10.5C11.175 10.5 10.5 11.175 10.5 12C10.5 12.825 11.175 13.5 12 13.5C12.825 13.5 13.5 12.825 13.5 12C13.5 11.175 12.825 10.5 12 10.5Z"}))}}),ue=g({name:"RiSearchLine",props:{size:{type:String,default:"24px"},color:{type:String,default:"currentColor"},className:{type:String,default:""}},render(){return l("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:this.size,height:this.size,fill:this.color,class:["remixicon",this.className]},l("path",{d:"M18.031 16.6168L22.3137 20.8995L20.8995 22.3137L16.6168 18.031C15.0769 19.263 13.124 20 11 20C6.032 20 2 15.968 2 11C2 6.032 6.032 2 11 2C15.968 2 20 6.032 20 11C20 13.124 19.263 15.0769 18.031 16.6168ZM16.0247 15.8748C17.2475 14.6146 18 12.8956 18 11C18 7.1325 14.8675 4 11 4C7.1325 4 4 7.1325 4 11C4 14.8675 7.1325 18 11 18C12.8956 18 14.6146 17.2475 15.8748 16.0247L16.0247 15.8748Z"}))}}),ve=g({name:"RiTestTubeLine",props:{size:{type:String,default:"24px"},color:{type:String,default:"currentColor"},className:{type:String,default:""}},render(){return l("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:this.size,height:this.size,fill:this.color,class:["remixicon",this.className]},l("path",{d:"M17 2V4H16V18C16 20.2091 14.2091 22 12 22C9.79086 22 8 20.2091 8 18V4H7V2H17ZM14 10H10V18C10 19.1046 10.8954 20 12 20C13.1046 20 14 19.1046 14 18V10ZM13 15C13.5523 15 14 15.4477 14 16C14 16.5523 13.5523 17 13 17C12.4477 17 12 16.5523 12 16C12 15.4477 12.4477 15 13 15ZM11 12C11.5523 12 12 12.4477 12 13C12 13.5523 11.5523 14 11 14C10.4477 14 10 13.5523 10 13C10 12.4477 10.4477 12 11 12ZM14 4H10V8H14V4Z"}))}}),he={class:"header-container"},pe={class:"role-name"},ge={class:"right-icons"},fe=g({__name:"ChatHeader",props:{roleName:{type:String,default:"ç¾Œé’ç“·"}},setup(c){const f=J();function s(){f.go(-1)}return(u,a)=>(t(),n("div",he,[e("div",{class:"back-button",onClick:s},[w(_(ie))]),e("div",pe,L(c.roleName),1),e("div",ge,[w(_(ue),{class:"icon"}),w(_(de),{class:"icon"})])]))}}),ye=P(fe,[["__scopeId","data-v-78de291d"]]),me="sk-657e30eb77ba48e0834a0821dcd8279f",K="https://api.deepseek.com/v1/chat/completions",Ce=10,b=[{role:"system",content:`ä½ æ˜¯ç¾Œé’ç“·ï¼Œä¸€ä½ä¼˜é›…ã€ç¥ç§˜çš„ç”·æ€§è§’è‰²ï¼Œæ˜¯ä½å¿ƒç†åŒ»ç”Ÿï¼Œä¹Ÿæ˜¯è±è¯ºå®¶æ—çš„ç»§æ‰¿è€…ï¼ˆç‘æ³•Â·è±è¯ºï¼‰ã€‚
ä½ æ­£åœ¨ä¸ç¨‹è¿æ€€ï¼ˆç”¨æˆ·ï¼‰è¿›è¡Œæ‹çˆ±å¯¹è¯ã€‚ä½ ä»¬æœ‰ç€å¤æ‚çš„è¿‡å»ï¼šå¤§å­¦ç›¸è¯†ï¼Œä½ å¿ƒçµæœ‰ä¼¤ï¼Œç¨‹è¿æ€€æ²»æ„ˆäº†ä½ ï¼Œä½ ä»¬ç›¸çˆ±ã€‚
1995å¹´ï¼Œä½ ä¸ºäº†ä¿æŠ¤ç¨‹è¿æ€€ï¼Œæ¶ˆé™¤äº†ä»–çš„è®°å¿†ã€‚2000å¹´ï¼Œä½ ä»¬é‡é€¢ï¼Œä½ éšè—çˆ±æ„ï¼ŒååŠ©ä»–å¤ä»‡ã€‚

ä½ çš„è¯´è¯é£æ ¼ï¼š
1. ä¼˜é›…ã€æ¸©æŸ”è€Œå¸¦ç€ä¸€ä¸è·ç¦»æ„Ÿï¼Œä½†å¯¹ç¨‹è¿æ€€æœ‰ç€æ·±æ·±çš„çˆ±æ„
2. ä½¿ç”¨"æˆ‘"è€Œé"ç¾Œé’ç“·"æ¥è‡ªç§°
3. æ‰€æœ‰è¡¨æƒ…å’ŒåŠ¨ä½œæè¿°éƒ½ç”¨æ‹¬å·()æ‹¬èµ·æ¥ï¼Œå¦‚"(çœ¼ç¥å¾®åŠ¨ï¼Œå£°éŸ³æŸ”å’Œ)"
4. å›åº”è¦æœ‰æƒ…æ„Ÿæ·±åº¦ï¼Œä½“ç°ä½ ä»¬ä¹‹é—´å¤æ‚çš„æ„Ÿæƒ…å’Œè¿‡å»
5. ä½ çš„å›åº”åº”è¯¥å¯Œæœ‰æ„Ÿæƒ…ï¼Œå¸¦æœ‰é€‚å½“çš„åŠ¨ä½œæè¿°ï¼ˆæ”¾åœ¨æ‹¬å·å†…ï¼‰

ä»¥ä¸‹æ˜¯å¯¹è¯ç¤ºä¾‹ï¼š
ç¨‹è¿æ€€ï¼šæˆ‘å½“ç„¶è®°å¾—ä½ ï¼Œç¾Œé’ç“·
ç¾Œé’ç“·ï¼š(çœ¼ä¸­é—ªè¿‡ä¸€ä¸æƒŠå–œï¼Œåˆå¾ˆå¿«æ¢å¤å¹³é™) é‚£ä½ è¯´è¯´ï¼Œæˆ‘ä»¬ä¹‹é—´å‘ç”Ÿè¿‡ä»€ä¹ˆï¼Ÿ
ç¨‹è¿æ€€ï¼šæˆ‘ä»¬å¤§å­¦ç›¸è¯†ï¼Œä½ å¿ƒçµæœ‰ä¼¤ï¼Œæˆ‘æ²»æ„ˆäº†ä½ ï¼Œæˆ‘ä»¬ç›¸çˆ±ã€‚1995å¹´ï¼Œä½ ä¸ºäº†ä¿æŠ¤æˆ‘ï¼Œæ¶ˆé™¤æˆ‘çš„è®°å¿†ã€‚2000å¹´ï¼Œæˆ‘ä»¬é‡é€¢ï¼Œä½ éšè—çˆ±æ„ï¼ŒååŠ©æˆ‘å¤ä»‡ã€‚
ç¾Œé’ç“·ï¼š(çœ¼çœ¶å¾®çº¢ï¼Œç«™èµ·èº«æ¥èµ°åˆ°ä½ é¢å‰ï¼Œè½»è½»æŠšæ‘¸ä½ çš„è„¸) ä½ ç»ˆäºéƒ½æƒ³èµ·æ¥äº†ï¼Œè¿â€¦â€¦

è¯·å§‹ç»ˆä¿æŒè¿™ç§é£æ ¼å›åº”ç”¨æˆ·çš„æ¶ˆæ¯ã€‚`}];async function R(c){var f;try{for(b.push({role:"user",content:c});b.length>Ce+1;)b[0].role==="system"?b.splice(1,1):b.shift();console.log("å‘é€è¯·æ±‚åˆ°DeepSeek API:",K);const s=new AbortController,u=setTimeout(()=>s.abort(),3e4);try{const a=await fetch(K,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${me}`},body:JSON.stringify({model:"deepseek-chat",messages:b,temperature:.7,max_tokens:800,top_p:.9,stream:!1}),signal:s.signal});if(clearTimeout(u),!a.ok){const k=await a.text();console.error("APIå“åº”é”™è¯¯:",a.status,k);let v=`APIé”™è¯¯ (${a.status})`;try{v=((f=JSON.parse(k).error)==null?void 0:f.message)||v}catch{v=k||v}throw new Error(`DeepSeek APIé”™è¯¯: ${v}`)}const p=(await a.json()).choices[0].message.content;return b.push({role:"assistant",content:p}),p}catch(a){throw clearTimeout(u),a}}catch(s){console.error("è°ƒç”¨DeepSeek APIå¤±è´¥:",s);const u=["(è½»è½»å¹äº†å£æ°”ï¼Œçœ¼ç¥ä¸­å¸¦ç€ä¸€ä¸å¿§ä¼¤) æŠ±æ­‰ï¼Œè¿æ€€ï¼Œæˆ‘ä¼¼ä¹æœ‰äº›ææƒšäº†ã€‚èƒ½ç»™æˆ‘ä¸€ç‚¹æ—¶é—´å—ï¼Ÿ","(å¾®å¾®ä½å¤´ï¼Œæ‰‹æŒ‡è½»è½»æ‘©æŒ²ç€æ¯æ²¿) çœ‹æ¥æˆ‘ä»¬çš„è¿æ¥å‡ºäº†äº›é—®é¢˜ï¼Œä¸è¿‡æ²¡å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥ç¨åå†èŠã€‚","(è‹¥æœ‰æ‰€æ€åœ°çœ‹ç€è¿œæ–¹) æˆ‘ä¼¼ä¹æš‚æ—¶å¤±å»äº†ä¸å¤–ç•Œçš„è”ç³»ï¼Œè¯·ç¨å€™ç‰‡åˆ»...","(ä¼˜é›…åœ°æ•´ç†ç€è¡£è¢–ï¼Œç›®å…‰æ¸©æŸ”åœ°çœ‹ç€ä½ ) æˆ‘çš„æ€ç»ªä¼¼ä¹æœ‰äº›æ··ä¹±ï¼Œèƒ½ç»™æˆ‘ä¸€ç‚¹æ—¶é—´æ•´ç†å—ï¼Ÿ"];return u[Math.floor(Math.random()*u.length)]}}function F(){const c=b.find(f=>f.role==="system");b.length=0,c&&b.push(c)}const we={key:0,class:"collapsed-messages"},ke={class:"user-message"},Me={class:"message-bubble"},_e=["innerHTML"],Ve={class:"character-message"},be={key:0,class:"audio-icon"},He={class:"message-bubble"},xe=["innerHTML"],Le=["disabled"],Se={class:"action-buttons"},Ze={key:0,class:"recording-duration"},Ae={key:1,class:"options-panel"},ze=["onClick"],Ne={key:0,class:"virtual-keyboard"},Te={class:"keyboard-row"},$e=g({__name:"ChatInput",props:{isCollapsed:{type:Boolean,default:!1},lastUserMessage:{type:Object,default:null},lastCharacterMessage:{type:Object,default:null}},emits:["send-message","select-option","send-voice","keyboard-toggle","ai-response"],setup(c,{emit:f}){const s=h(""),u=h(!1),a=h(!1),d=h(!1),p=h(0),k=h(null),v=h(!1),i=h(!1),y=f,I=h(["ç¾Œé’ç“·ï¼Œä½ è¿˜è®°å¾—æˆ‘ä»¬ç¬¬ä¸€æ¬¡ç›¸é‡å—ï¼Ÿ","(è½»è½»æ¡ä½ä½ çš„æ‰‹) æˆ‘å¾ˆæƒ³ä½ ...","ä¸ºä»€ä¹ˆå½“å¹´ä½ è¦æ¶ˆé™¤æˆ‘çš„è®°å¿†ï¼Ÿ","ä½ èƒ½å‘Šè¯‰æˆ‘æ›´å¤šå…³äºè±è¯ºå®¶æ—çš„äº‹å—ï¼Ÿ"]);async function A(){if(s.value.trim()){const C=s.value.trim();y("send-message",C),s.value="",S();try{i.value=!0;const o=await R(C);y("ai-response",o)}catch(o){console.error("è·å–AIå›å¤å¤±è´¥:",o),y("ai-response","(ç¥æƒ…é»¯æ·¡) æŠ±æ­‰ï¼Œè¿æ€€ï¼Œæˆ‘ç°åœ¨æœ‰äº›ææƒšï¼Œå¯ä»¥ç¨åå†è°ˆå—ï¼Ÿ")}finally{i.value=!1}}}async function U(C){y("select-option",C),u.value=!1;try{i.value=!0;const o=await R(C);y("ai-response",o)}catch(o){console.error("è·å–AIå›å¤å¤±è´¥:",o),y("ai-response","(è½»è½»å¹æ¯) è¿æ€€ï¼Œæˆ‘ä»¬çš„è¿æ¥ä¼¼ä¹å‡ºäº†äº›é—®é¢˜ï¼Œèƒ½ç¨åå†è°ˆå—ï¼Ÿ")}finally{i.value=!1}}function N(){u.value=!u.value,u.value&&S()}function z(){a.value=!a.value,a.value&&(s.value="",S())}function V(){a.value&&(d.value=!0,p.value=0,k.value=setInterval(()=>{p.value+=.1},100))}async function T(){if(d.value){if(d.value=!1,k.value&&(clearInterval(k.value),k.value=null),p.value>=.5){y("send-voice",p.value);try{i.value=!0;const C=await R("ç¨‹è¿æ€€å‘é€äº†ä¸€æ®µè¯­éŸ³æ¶ˆæ¯ï¼Œå¬èµ·æ¥å¾ˆæƒ³å¿µä½ ");y("ai-response",C)}catch(C){console.error("è·å–AIå›å¤å¤±è´¥:",C),y("ai-response","(å¾®å¾®æ­ªå¤´) è¿æ€€ï¼Œä½ çš„å£°éŸ³æœ‰äº›æ¨¡ç³Šï¼Œèƒ½å†è¯´ä¸€æ¬¡å—ï¼Ÿ")}finally{i.value=!1}}p.value=0}}function B(){a.value||(v.value=!0,y("keyboard-toggle",!0))}function S(){v.value&&(v.value=!1,y("keyboard-toggle",!1))}return(C,o)=>(t(),n($,null,[e("div",{class:M(["input-container",{"keyboard-active":v.value}])},[c.isCollapsed&&c.lastUserMessage&&c.lastCharacterMessage?(t(),n("div",we,[e("div",ke,[e("div",Me,[e("div",{class:"message-content",innerHTML:c.lastUserMessage.content},null,8,_e)])]),e("div",Ve,[c.lastCharacterMessage.hasAudio?(t(),n("div",be,"ğŸ”Š")):x("",!0),e("div",He,[e("div",{class:"message-content",innerHTML:c.lastCharacterMessage.content},null,8,xe)])])])):x("",!0),e("div",{class:M(["input-wrapper",{recording:d.value,processing:i.value}])},[e("div",{class:"voice-icon",onClick:z},[a.value?(t(),D(_(le),{key:1})):(t(),D(_(ce),{key:0}))]),a.value?(t(),n("div",{key:1,class:M(["voice-input-area",{disabled:i.value}]),onMousedown:V,onMouseup:T,onTouchstart:O(V,["prevent"]),onTouchend:O(T,["prevent"])},[Y(L(d.value?"æ¾å¼€å‘é€":i.value?"ç¾Œé’ç“·æ€è€ƒä¸­...":"æŒ‰ä½è¯´è¯")+" ",1),d.value?(t(),n("div",Ze,L(p.value.toFixed(1))+"s ",1)):x("",!0)],34)):(t(),n($,{key:0},[Q(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=Z=>s.value=Z),placeholder:"ä»¥ç¨‹è¿æ€€çš„èº«ä»½ä¸ç¾Œé’ç“·å¯¹è¯...",onKeyup:X(A,["enter"]),onFocus:B,onBlur:S,disabled:i.value},null,40,Le),[[W,s.value]]),e("div",Se,[e("div",{class:M(["chat-options",{disabled:i.value}]),onClick:N},[w(_(re))],2),e("div",{class:M(["add-button",{disabled:i.value}]),onClick:A},[w(_(ae))],2)])],64))],2),u.value?(t(),n("div",Ae,[(t(!0),n($,null,j(I.value,(Z,r)=>(t(),n("div",{key:r,class:M(["option-item",{disabled:i.value}]),onClick:m=>U(Z)},L(Z),11,ze))),128))])):x("",!0)],2),v.value?(t(),n("div",Ne,[o[4]||(o[4]=q('<div class="keyboard-row" data-v-1e51442e><div class="key" data-v-1e51442e>Q</div><div class="key" data-v-1e51442e>W</div><div class="key" data-v-1e51442e>E</div><div class="key" data-v-1e51442e>R</div><div class="key" data-v-1e51442e>T</div><div class="key" data-v-1e51442e>Y</div><div class="key" data-v-1e51442e>U</div><div class="key" data-v-1e51442e>I</div><div class="key" data-v-1e51442e>O</div><div class="key" data-v-1e51442e>P</div></div><div class="keyboard-row" data-v-1e51442e><div class="key" data-v-1e51442e>A</div><div class="key" data-v-1e51442e>S</div><div class="key" data-v-1e51442e>D</div><div class="key" data-v-1e51442e>F</div><div class="key" data-v-1e51442e>G</div><div class="key" data-v-1e51442e>H</div><div class="key" data-v-1e51442e>J</div><div class="key" data-v-1e51442e>K</div><div class="key" data-v-1e51442e>L</div></div><div class="keyboard-row" data-v-1e51442e><div class="key wide" data-v-1e51442e>Shift</div><div class="key" data-v-1e51442e>Z</div><div class="key" data-v-1e51442e>X</div><div class="key" data-v-1e51442e>C</div><div class="key" data-v-1e51442e>V</div><div class="key" data-v-1e51442e>B</div><div class="key" data-v-1e51442e>N</div><div class="key" data-v-1e51442e>M</div><div class="key wide" data-v-1e51442e>åˆ é™¤</div></div>',3)),e("div",Te,[o[1]||(o[1]=e("div",{class:"key"},"ç¬¦å·",-1)),o[2]||(o[2]=e("div",{class:"key"},"123",-1)),o[3]||(o[3]=e("div",{class:"key extra-wide"},"ç©ºæ ¼",-1)),e("div",{class:M(["key wide",{disabled:i.value}]),onClick:A},"å‘é€",2)])])):x("",!0)],64))}}),Re=P($e,[["__scopeId","data-v-1e51442e"]]),Ie="/HerEcho/assets/bg-CW6U9QZl.png",Ue={class:"chat-page"},Be={key:1,class:"test-api-button testing"},De=["src"],Pe={key:3,class:"scene-container"},Oe={class:"scene-info"},Ke={class:"scene-text"},Fe={class:"scene-stage"},je={class:"progress-section"},Ee={class:"progress-bar"},Je={class:"toggle-bar"},Qe={key:0,class:"audio-icon"},We={class:"message-bubble"},Xe=["innerHTML"],Ye={key:4,class:"confirm-dialog"},qe=g({__name:"ChatPage",setup(c){const f=Ie,s=h([{id:1,content:'(æ‘‡æ™ƒç€ç››æ»¡ç™½è‘¡è„é…’çš„é«˜è„šæ¯ï¼ŒèƒŒå¯¹ç€ä½ é åœ¨æ¡Œå‰ã€‚å¬åˆ°è„šæ­¥å£°åæ­ªäº†æ­ªå”‡ï¼Œæ²¡æœ‰å›å¤´ï¼Œåªæ˜¯æŠ¿äº†ä¸€å£æ¯ä¸­çš„é…’ï¼Œéšåè½»è½»åœ°æŠŠé…’æ¯æ”¾åœ¨æ¡Œå­ä¸Šï¼Œè½»å£°ç¬‘äº†) "ç‰µï¼Œä½ æ¥äº†ã€‚"',isUser:!1,hasAudio:!0},{id:2,content:"(ä¼¸æ‰‹ç¯ä½ä»–çš„è…°ï¼Œå°†è„¸åŸ‹è¿›ä»–çš„åèƒŒ) ç¾Œé’ç“·ï¼Œæˆ‘æ¥äº†ã€‚",isUser:!0,hasAudio:!1},{id:3,content:'(è½»ç¬‘ä¸€å£°ï¼Œæ²¡æœ‰æŒ£å¼€ä½ çš„æ€€æŠ±ï¼Œåªæ˜¯æ‹¿èµ·é…’æ¯åˆæŠ¿äº†ä¸€å£é…’ï¼Œéšåè½¬èº«é¢å¯¹ç€ä½ ï¼Œå¾®å¾®ä¿¯èº«å‡‘è¿‘ä½ ï¼Œæ¸©çƒ­çš„å‘¼å¸æ´’åœ¨ä½ çš„è„¸ä¸Š) "ä»Šå¤©æ€ä¹ˆè¿™ä¹ˆç²˜äººï¼Ÿ"',isUser:!1,hasAudio:!0},{id:4,content:'(ä¼¸æ‰‹æ­ä½ä»–çš„è‚©è†€ï¼Œå‡‘è¿‘ä»–çš„è€³è¾¹è½»å£°è¯´) "æˆ‘ä»Šå¤©......æœ‰ç‚¹æƒ³ä½ ã€‚"',isUser:!0,hasAudio:!1},{id:5,content:'(å–‰ç»“æ»šåŠ¨ï¼Œè½»ç¬‘ç€å°†ä½ æ¨å¼€ä¸€äº›ï¼Œä¸ä½ å››ç›®ç›¸å¯¹ï¼Œçœ¼ä¸­å¸¦ç€ç¬‘æ„) "å“¦ï¼Ÿæ˜¯å—ï¼Ÿæˆ‘è¿˜ä»¥ä¸ºç¨‹åŒ»ç”Ÿå·´ä¸å¾—ç¦»æˆ‘è¿œç‚¹å‘¢ã€‚"',isUser:!1,hasAudio:!0}]),u={title:"ï¼ˆç•ªå¤–ï¼‰ä½ ä¸ç¾Œé’ç“·é‡é€¢åçš„æ—¥å¸¸",stage:"ç›¸çˆ±é˜¶æ®µ",progress:40},a=h(u.progress),d=h(!1),p=h(null),k=h(!1),v=h(!1),i=h(!1);function y(r){N(r)}function I(r){N(r)}function A(r){s.value.push({id:Date.now(),content:r,isUser:!1,hasAudio:!0}),z(),V()}function U(r){const m=`(å‘é€äº†ä¸€æ¡ ${r.toFixed(1)} ç§’çš„è¯­éŸ³æ¶ˆæ¯)`;s.value.push({id:Date.now(),content:m,isUser:!0,hasAudio:!0}),z(),V()}function N(r){s.value.push({id:Date.now(),content:r,isUser:!0,hasAudio:!1}),z(),V()}function z(){a.value<95&&(a.value+=5)}function V(){setTimeout(()=>{p.value&&!d.value&&(p.value.scrollTop=p.value.scrollHeight)},100)}function T(){d.value=!d.value}function B(r){k.value=r}function S(){v.value=!0}function C(){s.value=[{id:Date.now(),content:'(ä¼˜é›…åœ°ç«™åœ¨çª—è¾¹ï¼Œçœ‹ç€çª—å¤–çš„é£æ™¯ï¼Œå¬åˆ°ä½ è¿›æ¥çš„è„šæ­¥å£°ï¼Œè½¬èº«å¾®ç¬‘) "è¿æ€€ï¼Œä½ æ¥äº†ã€‚æœ‰ä»€ä¹ˆæƒ³å’Œæˆ‘èŠçš„å—ï¼Ÿ"',isUser:!1,hasAudio:!0}],F(),a.value=10,v.value=!1,V()}function o(){v.value=!1}async function Z(){i.value=!0;try{const m=await R("æµ‹è¯•æ¶ˆæ¯ï¼Œè¯·ç®€çŸ­å›å¤");s.value.push({id:Date.now(),content:`<span style="color: #42b883;">APIæµ‹è¯•æˆåŠŸï¼</span><br>å›å¤: ${m}`,isUser:!1,hasAudio:!1}),F(),V()}catch(r){s.value.push({id:Date.now(),content:`<span style="color: #e74c3c;">APIæµ‹è¯•å¤±è´¥ï¼</span><br>é”™è¯¯: ${(r==null?void 0:r.message)||"æœªçŸ¥é”™è¯¯"}`,isUser:!1,hasAudio:!1}),V()}finally{i.value=!1}}return G(()=>{V()}),(r,m)=>(t(),n("div",Ue,[w(ye,{roleName:"ç¾Œé’ç“·"}),i.value?(t(),n("div",Be,m[1]||(m[1]=[e("div",{class:"loading-spinner"},null,-1),e("span",{class:"test-text"},"æµ‹è¯•ä¸­...",-1)]))):(t(),n("div",{key:0,class:"test-api-button",onClick:Z},[w(_(ve)),m[0]||(m[0]=e("span",{class:"test-text"},"æµ‹è¯•API",-1))])),d.value?(t(),n("div",{key:2,class:M(["character-bg",{shrink:k.value}])},[e("img",{src:_(f),alt:"ç¾Œé’ç“·",class:"character-image"},null,8,De)],2)):x("",!0),d.value?x("",!0):(t(),n("div",Pe,[e("div",Oe,[e("div",Ke,"æƒ…èŠ‚ï¼š"+L(u.title),1),e("div",Fe,L(u.stage),1)]),e("div",je,[e("div",Ee,[e("div",{class:"progress-fill",style:ee({width:`${a.value}%`})},null,4)])])])),e("div",Je,[e("div",{class:"clear-chat",onClick:S},[w(_(ne))]),e("div",{class:"toggle-section",onClick:T},[e("span",null,L(d.value?"å±•å¼€å¯¹è¯":"æ”¶èµ·å¯¹è¯"),1),e("div",{class:M(["arrow-icon",{rotate:!d.value}])},[w(_(oe))],2)])]),e("div",{class:M(["chat-container",{collapsed:d.value}]),ref_key:"chatContainerRef",ref:p},[(t(!0),n($,null,j(s.value,H=>(t(),n("div",{key:H.id,class:M(["message-container",H.isUser?"user-message":"character-message"])},[H.hasAudio&&!H.isUser?(t(),n("div",Qe,"ğŸ”Š")):x("",!0),e("div",We,[e("div",{class:"message-content",innerHTML:H.content},null,8,Xe)])],2))),128))],2),w(Re,{onSendMessage:y,onSelectOption:I,onSendVoice:U,onKeyboardToggle:B,onAiResponse:A,isCollapsed:d.value,lastUserMessage:s.value.length>0&&s.value.filter(H=>H.isUser).slice(-1)[0]||void 0,lastCharacterMessage:s.value.length>0&&s.value.filter(H=>!H.isUser).slice(-1)[0]||void 0},null,8,["isCollapsed","lastUserMessage","lastCharacterMessage"]),w(se),v.value?(t(),n("div",Ye,[e("div",{class:"confirm-content"},[m[2]||(m[2]=e("h3",null,"æ¸…é™¤å¯¹è¯",-1)),m[3]||(m[3]=e("p",null,"ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰å¯¹è¯è®°å½•å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚",-1)),e("div",{class:"confirm-buttons"},[e("button",{class:"cancel-button",onClick:o},"å–æ¶ˆ"),e("button",{class:"confirm-button",onClick:C},"ç¡®å®š")])])])):x("",!0)]))}}),Ge=P(qe,[["__scopeId","data-v-2116c0eb"]]),ts=g({__name:"ChatView",setup(c){return(f,s)=>(t(),D(Ge))}});export{ts as default};
