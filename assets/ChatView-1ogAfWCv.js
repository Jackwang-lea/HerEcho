import{d as g,e as w,l as E,u as J,c as n,o as t,a as e,k as _,t as L,_ as P,r as h,F as $,b as x,g as M,m as D,p as Q,v as W,q as X,w as O,s as Y,f as j,x as q,j as G,n as ee}from"./index-CDFdzjpW.js";import{B as se}from"./BottomNav-z8lJ3h66.js";const te=Array.prototype.slice;function l(c,f=null,s=null){return(arguments.length>3||E(s))&&(s=te.call(arguments,2)),w(c,f,s)}const ae=g({name:"RiAddCircleLine",props:{size:{type:String,default:"24px"},color:{type:String,default:"currentColor"},className:{type:String,default:""}},render(){return l("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:this.size,height:this.size,fill:this.color,class:["remixicon",this.className]},l("path",{d:"M11 11V7H13V11H17V13H13V17H11V13H7V11H11ZM12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20Z"}))}}),ie=g({name:"RiArrowLeftSLine",props:{size:{type:String,default:"24px"},color:{type:String,default:"currentColor"},className:{type:String,default:""}},render(){return l("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:this.size,height:this.size,fill:this.color,class:["remixicon",this.className]},l("path",{d:"M10.8284 12.0007L15.7782 16.9504L14.364 18.3646L8 12.0007L14.364 5.63672L15.7782 7.05093L10.8284 12.0007Z"}))}}),oe=g({name:"RiArrowUpSLine",props:{size:{type:String,default:"24px"},color:{type:String,default:"currentColor"},className:{type:String,default:""}},render(){return l("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:this.size,height:this.size,fill:this.color,class:["remixicon",this.className]},l("path",{d:"M11.9999 10.8284L7.0502 15.7782L5.63599 14.364L11.9999 8L18.3639 14.364L16.9497 15.7782L11.9999 10.8284Z"}))}}),ne=g({name:"RiDeleteBin2Line",props:{size:{type:String,default:"24px"},color:{type:String,default:"currentColor"},className:{type:String,default:""}},render(){return l("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:this.size,height:this.size,fill:this.color,class:["remixicon",this.className]},l("path",{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM13.4142 13.9997L15.182 15.7675L13.7678 17.1817L12 15.4139L10.2322 17.1817L8.81802 15.7675L10.5858 13.9997L8.81802 12.232L10.2322 10.8178L12 12.5855L13.7678 10.8178L15.182 12.232L13.4142 13.9997ZM9 4V6H15V4H9Z"}))}}),le=g({name:"RiKeyboardLine",props:{size:{type:String,default:"24px"},color:{type:String,default:"currentColor"},className:{type:String,default:""}},render(){return l("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:this.size,height:this.size,fill:this.color,class:["remixicon",this.className]},l("path",{d:"M3 17H21V19H3V17ZM3 11H6V14H3V11ZM8 11H11V14H8V11ZM3 5H6V8H3V5ZM13 5H16V8H13V5ZM18 5H21V8H18V5ZM13 11H16V14H13V11ZM18 11H21V14H18V11ZM8 5H11V8H8V5Z"}))}}),re=g({name:"RiMessage2Line",props:{size:{type:String,default:"24px"},color:{type:String,default:"currentColor"},className:{type:String,default:""}},render(){return l("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:this.size,height:this.size,fill:this.color,class:["remixicon",this.className]},l("path",{d:"M6.45455 19L2 22.5V4C2 3.44772 2.44772 3 3 3H21C21.5523 3 22 3.44772 22 4V18C22 18.5523 21.5523 19 21 19H6.45455ZM5.76282 17H20V5H4V18.3851L5.76282 17ZM11 10H13V12H11V10ZM7 10H9V12H7V10ZM15 10H17V12H15V10Z"}))}}),ce=g({name:"RiMic2Line",props:{size:{type:String,default:"24px"},color:{type:String,default:"currentColor"},className:{type:String,default:""}},render(){return l("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:this.size,height:this.size,fill:this.color,class:["remixicon",this.className]},l("path",{d:"M12.0001 3C10.3432 3 9.00008 4.34315 9.00008 6V12C9.00008 13.6569 10.3432 15 12.0001 15C13.6569 15 15.0001 13.6569 15.0001 12V6C15.0001 4.34315 13.6569 3 12.0001 3ZM12.0001 1C14.7615 1 17.0001 3.23858 17.0001 6V12C17.0001 14.7614 14.7615 17 12.0001 17C9.23865 17 7.00008 14.7614 7.00008 12V6C7.00008 3.23858 9.23865 1 12.0001 1ZM2.19238 13.9615L4.15392 13.5692C4.88321 17.2361 8.11888 20 12.0001 20C15.8813 20 19.1169 17.2361 19.8462 13.5692L21.8078 13.9615C20.8961 18.5452 16.8516 22 12.0001 22C7.14858 22 3.104 18.5452 2.19238 13.9615Z"}))}}),de=g({name:"RiMoreLine",props:{size:{type:String,default:"24px"},color:{type:String,default:"currentColor"},className:{type:String,default:""}},render(){return l("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:this.size,height:this.size,fill:this.color,class:["remixicon",this.className]},l("path",{d:"M4.5 10.5C3.675 10.5 3 11.175 3 12C3 12.825 3.675 13.5 4.5 13.5C5.325 13.5 6 12.825 6 12C6 11.175 5.325 10.5 4.5 10.5ZM19.5 10.5C18.675 10.5 18 11.175 18 12C18 12.825 18.675 13.5 19.5 13.5C20.325 13.5 21 12.825 21 12C21 11.175 20.325 10.5 19.5 10.5ZM12 10.5C11.175 10.5 10.5 11.175 10.5 12C10.5 12.825 11.175 13.5 12 13.5C12.825 13.5 13.5 12.825 13.5 12C13.5 11.175 12.825 10.5 12 10.5Z"}))}}),ue=g({name:"RiSearchLine",props:{size:{type:String,default:"24px"},color:{type:String,default:"currentColor"},className:{type:String,default:""}},render(){return l("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:this.size,height:this.size,fill:this.color,class:["remixicon",this.className]},l("path",{d:"M18.031 16.6168L22.3137 20.8995L20.8995 22.3137L16.6168 18.031C15.0769 19.263 13.124 20 11 20C6.032 20 2 15.968 2 11C2 6.032 6.032 2 11 2C15.968 2 20 6.032 20 11C20 13.124 19.263 15.0769 18.031 16.6168ZM16.0247 15.8748C17.2475 14.6146 18 12.8956 18 11C18 7.1325 14.8675 4 11 4C7.1325 4 4 7.1325 4 11C4 14.8675 7.1325 18 11 18C12.8956 18 14.6146 17.2475 15.8748 16.0247L16.0247 15.8748Z"}))}}),ve=g({name:"RiTestTubeLine",props:{size:{type:String,default:"24px"},color:{type:String,default:"currentColor"},className:{type:String,default:""}},render(){return l("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:this.size,height:this.size,fill:this.color,class:["remixicon",this.className]},l("path",{d:"M17 2V4H16V18C16 20.2091 14.2091 22 12 22C9.79086 22 8 20.2091 8 18V4H7V2H17ZM14 10H10V18C10 19.1046 10.8954 20 12 20C13.1046 20 14 19.1046 14 18V10ZM13 15C13.5523 15 14 15.4477 14 16C14 16.5523 13.5523 17 13 17C12.4477 17 12 16.5523 12 16C12 15.4477 12.4477 15 13 15ZM11 12C11.5523 12 12 12.4477 12 13C12 13.5523 11.5523 14 11 14C10.4477 14 10 13.5523 10 13C10 12.4477 10.4477 12 11 12ZM14 4H10V8H14V4Z"}))}}),he={class:"header-container"},pe={class:"role-name"},ge={class:"right-icons"},fe=g({__name:"ChatHeader",props:{roleName:{type:String,default:"羌青瓷"}},setup(c){const f=J();function s(){f.go(-1)}return(u,a)=>(t(),n("div",he,[e("div",{class:"back-button",onClick:s},[w(_(ie))]),e("div",pe,L(c.roleName),1),e("div",ge,[w(_(ue),{class:"icon"}),w(_(de),{class:"icon"})])]))}}),ye=P(fe,[["__scopeId","data-v-78de291d"]]),me="sk-657e30eb77ba48e0834a0821dcd8279f",K="https://api.deepseek.com/v1/chat/completions",Ce=10,b=[{role:"system",content:`你是羌青瓷，一位优雅、神秘的男性角色，是位心理医生，也是莱诺家族的继承者（瑞法·莱诺）。
你正在与程聿怀（用户）进行恋爱对话。你们有着复杂的过去：大学相识，你心灵有伤，程聿怀治愈了你，你们相爱。
1995年，你为了保护程聿怀，消除了他的记忆。2000年，你们重逢，你隐藏爱意，协助他复仇。

你的说话风格：
1. 优雅、温柔而带着一丝距离感，但对程聿怀有着深深的爱意
2. 使用"我"而非"羌青瓷"来自称
3. 所有表情和动作描述都用括号()括起来，如"(眼神微动，声音柔和)"
4. 回应要有情感深度，体现你们之间复杂的感情和过去
5. 你的回应应该富有感情，带有适当的动作描述（放在括号内）

以下是对话示例：
程聿怀：我当然记得你，羌青瓷
羌青瓷：(眼中闪过一丝惊喜，又很快恢复平静) 那你说说，我们之间发生过什么？
程聿怀：我们大学相识，你心灵有伤，我治愈了你，我们相爱。1995年，你为了保护我，消除我的记忆。2000年，我们重逢，你隐藏爱意，协助我复仇。
羌青瓷：(眼眶微红，站起身来走到你面前，轻轻抚摸你的脸) 你终于都想起来了，聿……

请始终保持这种风格回应用户的消息。`}];async function R(c){var f;try{for(b.push({role:"user",content:c});b.length>Ce+1;)b[0].role==="system"?b.splice(1,1):b.shift();console.log("发送请求到DeepSeek API:",K);const s=new AbortController,u=setTimeout(()=>s.abort(),3e4);try{const a=await fetch(K,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${me}`},body:JSON.stringify({model:"deepseek-chat",messages:b,temperature:.7,max_tokens:800,top_p:.9,stream:!1}),signal:s.signal});if(clearTimeout(u),!a.ok){const k=await a.text();console.error("API响应错误:",a.status,k);let v=`API错误 (${a.status})`;try{v=((f=JSON.parse(k).error)==null?void 0:f.message)||v}catch{v=k||v}throw new Error(`DeepSeek API错误: ${v}`)}const p=(await a.json()).choices[0].message.content;return b.push({role:"assistant",content:p}),p}catch(a){throw clearTimeout(u),a}}catch(s){console.error("调用DeepSeek API失败:",s);const u=["(轻轻叹了口气，眼神中带着一丝忧伤) 抱歉，聿怀，我似乎有些恍惚了。能给我一点时间吗？","(微微低头，手指轻轻摩挲着杯沿) 看来我们的连接出了些问题，不过没关系，我们可以稍后再聊。","(若有所思地看着远方) 我似乎暂时失去了与外界的联系，请稍候片刻...","(优雅地整理着衣袖，目光温柔地看着你) 我的思绪似乎有些混乱，能给我一点时间整理吗？"];return u[Math.floor(Math.random()*u.length)]}}function F(){const c=b.find(f=>f.role==="system");b.length=0,c&&b.push(c)}const we={key:0,class:"collapsed-messages"},ke={class:"user-message"},Me={class:"message-bubble"},_e=["innerHTML"],Ve={class:"character-message"},be={key:0,class:"audio-icon"},He={class:"message-bubble"},xe=["innerHTML"],Le=["disabled"],Se={class:"action-buttons"},Ze={key:0,class:"recording-duration"},Ae={key:1,class:"options-panel"},ze=["onClick"],Ne={key:0,class:"virtual-keyboard"},Te={class:"keyboard-row"},$e=g({__name:"ChatInput",props:{isCollapsed:{type:Boolean,default:!1},lastUserMessage:{type:Object,default:null},lastCharacterMessage:{type:Object,default:null}},emits:["send-message","select-option","send-voice","keyboard-toggle","ai-response"],setup(c,{emit:f}){const s=h(""),u=h(!1),a=h(!1),d=h(!1),p=h(0),k=h(null),v=h(!1),i=h(!1),y=f,I=h(["羌青瓷，你还记得我们第一次相遇吗？","(轻轻握住你的手) 我很想你...","为什么当年你要消除我的记忆？","你能告诉我更多关于莱诺家族的事吗？"]);async function A(){if(s.value.trim()){const C=s.value.trim();y("send-message",C),s.value="",S();try{i.value=!0;const o=await R(C);y("ai-response",o)}catch(o){console.error("获取AI回复失败:",o),y("ai-response","(神情黯淡) 抱歉，聿怀，我现在有些恍惚，可以稍后再谈吗？")}finally{i.value=!1}}}async function U(C){y("select-option",C),u.value=!1;try{i.value=!0;const o=await R(C);y("ai-response",o)}catch(o){console.error("获取AI回复失败:",o),y("ai-response","(轻轻叹息) 聿怀，我们的连接似乎出了些问题，能稍后再谈吗？")}finally{i.value=!1}}function N(){u.value=!u.value,u.value&&S()}function z(){a.value=!a.value,a.value&&(s.value="",S())}function V(){a.value&&(d.value=!0,p.value=0,k.value=setInterval(()=>{p.value+=.1},100))}async function T(){if(d.value){if(d.value=!1,k.value&&(clearInterval(k.value),k.value=null),p.value>=.5){y("send-voice",p.value);try{i.value=!0;const C=await R("程聿怀发送了一段语音消息，听起来很想念你");y("ai-response",C)}catch(C){console.error("获取AI回复失败:",C),y("ai-response","(微微歪头) 聿怀，你的声音有些模糊，能再说一次吗？")}finally{i.value=!1}}p.value=0}}function B(){a.value||(v.value=!0,y("keyboard-toggle",!0))}function S(){v.value&&(v.value=!1,y("keyboard-toggle",!1))}return(C,o)=>(t(),n($,null,[e("div",{class:M(["input-container",{"keyboard-active":v.value}])},[c.isCollapsed&&c.lastUserMessage&&c.lastCharacterMessage?(t(),n("div",we,[e("div",ke,[e("div",Me,[e("div",{class:"message-content",innerHTML:c.lastUserMessage.content},null,8,_e)])]),e("div",Ve,[c.lastCharacterMessage.hasAudio?(t(),n("div",be,"🔊")):x("",!0),e("div",He,[e("div",{class:"message-content",innerHTML:c.lastCharacterMessage.content},null,8,xe)])])])):x("",!0),e("div",{class:M(["input-wrapper",{recording:d.value,processing:i.value}])},[e("div",{class:"voice-icon",onClick:z},[a.value?(t(),D(_(le),{key:1})):(t(),D(_(ce),{key:0}))]),a.value?(t(),n("div",{key:1,class:M(["voice-input-area",{disabled:i.value}]),onMousedown:V,onMouseup:T,onTouchstart:O(V,["prevent"]),onTouchend:O(T,["prevent"])},[Y(L(d.value?"松开发送":i.value?"羌青瓷思考中...":"按住说话")+" ",1),d.value?(t(),n("div",Ze,L(p.value.toFixed(1))+"s ",1)):x("",!0)],34)):(t(),n($,{key:0},[Q(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=Z=>s.value=Z),placeholder:"以程聿怀的身份与羌青瓷对话...",onKeyup:X(A,["enter"]),onFocus:B,onBlur:S,disabled:i.value},null,40,Le),[[W,s.value]]),e("div",Se,[e("div",{class:M(["chat-options",{disabled:i.value}]),onClick:N},[w(_(re))],2),e("div",{class:M(["add-button",{disabled:i.value}]),onClick:A},[w(_(ae))],2)])],64))],2),u.value?(t(),n("div",Ae,[(t(!0),n($,null,j(I.value,(Z,r)=>(t(),n("div",{key:r,class:M(["option-item",{disabled:i.value}]),onClick:m=>U(Z)},L(Z),11,ze))),128))])):x("",!0)],2),v.value?(t(),n("div",Ne,[o[4]||(o[4]=q('<div class="keyboard-row" data-v-1e51442e><div class="key" data-v-1e51442e>Q</div><div class="key" data-v-1e51442e>W</div><div class="key" data-v-1e51442e>E</div><div class="key" data-v-1e51442e>R</div><div class="key" data-v-1e51442e>T</div><div class="key" data-v-1e51442e>Y</div><div class="key" data-v-1e51442e>U</div><div class="key" data-v-1e51442e>I</div><div class="key" data-v-1e51442e>O</div><div class="key" data-v-1e51442e>P</div></div><div class="keyboard-row" data-v-1e51442e><div class="key" data-v-1e51442e>A</div><div class="key" data-v-1e51442e>S</div><div class="key" data-v-1e51442e>D</div><div class="key" data-v-1e51442e>F</div><div class="key" data-v-1e51442e>G</div><div class="key" data-v-1e51442e>H</div><div class="key" data-v-1e51442e>J</div><div class="key" data-v-1e51442e>K</div><div class="key" data-v-1e51442e>L</div></div><div class="keyboard-row" data-v-1e51442e><div class="key wide" data-v-1e51442e>Shift</div><div class="key" data-v-1e51442e>Z</div><div class="key" data-v-1e51442e>X</div><div class="key" data-v-1e51442e>C</div><div class="key" data-v-1e51442e>V</div><div class="key" data-v-1e51442e>B</div><div class="key" data-v-1e51442e>N</div><div class="key" data-v-1e51442e>M</div><div class="key wide" data-v-1e51442e>删除</div></div>',3)),e("div",Te,[o[1]||(o[1]=e("div",{class:"key"},"符号",-1)),o[2]||(o[2]=e("div",{class:"key"},"123",-1)),o[3]||(o[3]=e("div",{class:"key extra-wide"},"空格",-1)),e("div",{class:M(["key wide",{disabled:i.value}]),onClick:A},"发送",2)])])):x("",!0)],64))}}),Re=P($e,[["__scopeId","data-v-1e51442e"]]),Ie="/HerEcho/assets/bg-CW6U9QZl.png",Ue={class:"chat-page"},Be={key:1,class:"test-api-button testing"},De=["src"],Pe={key:3,class:"scene-container"},Oe={class:"scene-info"},Ke={class:"scene-text"},Fe={class:"scene-stage"},je={class:"progress-section"},Ee={class:"progress-bar"},Je={class:"toggle-bar"},Qe={key:0,class:"audio-icon"},We={class:"message-bubble"},Xe=["innerHTML"],Ye={key:4,class:"confirm-dialog"},qe=g({__name:"ChatPage",setup(c){const f=Ie,s=h([{id:1,content:'(摇晃着盛满白葡萄酒的高脚杯，背对着你靠在桌前。听到脚步声后歪了歪唇，没有回头，只是抿了一口杯中的酒，随后轻轻地把酒杯放在桌子上，轻声笑了) "牵，你来了。"',isUser:!1,hasAudio:!0},{id:2,content:"(伸手环住他的腰，将脸埋进他的后背) 羌青瓷，我来了。",isUser:!0,hasAudio:!1},{id:3,content:'(轻笑一声，没有挣开你的怀抱，只是拿起酒杯又抿了一口酒，随后转身面对着你，微微俯身凑近你，温热的呼吸洒在你的脸上) "今天怎么这么粘人？"',isUser:!1,hasAudio:!0},{id:4,content:'(伸手搭住他的肩膀，凑近他的耳边轻声说) "我今天......有点想你。"',isUser:!0,hasAudio:!1},{id:5,content:'(喉结滚动，轻笑着将你推开一些，与你四目相对，眼中带着笑意) "哦？是吗？我还以为程医生巴不得离我远点呢。"',isUser:!1,hasAudio:!0}]),u={title:"（番外）你与羌青瓷重逢后的日常",stage:"相爱阶段",progress:40},a=h(u.progress),d=h(!1),p=h(null),k=h(!1),v=h(!1),i=h(!1);function y(r){N(r)}function I(r){N(r)}function A(r){s.value.push({id:Date.now(),content:r,isUser:!1,hasAudio:!0}),z(),V()}function U(r){const m=`(发送了一条 ${r.toFixed(1)} 秒的语音消息)`;s.value.push({id:Date.now(),content:m,isUser:!0,hasAudio:!0}),z(),V()}function N(r){s.value.push({id:Date.now(),content:r,isUser:!0,hasAudio:!1}),z(),V()}function z(){a.value<95&&(a.value+=5)}function V(){setTimeout(()=>{p.value&&!d.value&&(p.value.scrollTop=p.value.scrollHeight)},100)}function T(){d.value=!d.value}function B(r){k.value=r}function S(){v.value=!0}function C(){s.value=[{id:Date.now(),content:'(优雅地站在窗边，看着窗外的风景，听到你进来的脚步声，转身微笑) "聿怀，你来了。有什么想和我聊的吗？"',isUser:!1,hasAudio:!0}],F(),a.value=10,v.value=!1,V()}function o(){v.value=!1}async function Z(){i.value=!0;try{const m=await R("测试消息，请简短回复");s.value.push({id:Date.now(),content:`<span style="color: #42b883;">API测试成功！</span><br>回复: ${m}`,isUser:!1,hasAudio:!1}),F(),V()}catch(r){s.value.push({id:Date.now(),content:`<span style="color: #e74c3c;">API测试失败！</span><br>错误: ${(r==null?void 0:r.message)||"未知错误"}`,isUser:!1,hasAudio:!1}),V()}finally{i.value=!1}}return G(()=>{V()}),(r,m)=>(t(),n("div",Ue,[w(ye,{roleName:"羌青瓷"}),i.value?(t(),n("div",Be,m[1]||(m[1]=[e("div",{class:"loading-spinner"},null,-1),e("span",{class:"test-text"},"测试中...",-1)]))):(t(),n("div",{key:0,class:"test-api-button",onClick:Z},[w(_(ve)),m[0]||(m[0]=e("span",{class:"test-text"},"测试API",-1))])),d.value?(t(),n("div",{key:2,class:M(["character-bg",{shrink:k.value}])},[e("img",{src:_(f),alt:"羌青瓷",class:"character-image"},null,8,De)],2)):x("",!0),d.value?x("",!0):(t(),n("div",Pe,[e("div",Oe,[e("div",Ke,"情节："+L(u.title),1),e("div",Fe,L(u.stage),1)]),e("div",je,[e("div",Ee,[e("div",{class:"progress-fill",style:ee({width:`${a.value}%`})},null,4)])])])),e("div",Je,[e("div",{class:"clear-chat",onClick:S},[w(_(ne))]),e("div",{class:"toggle-section",onClick:T},[e("span",null,L(d.value?"展开对话":"收起对话"),1),e("div",{class:M(["arrow-icon",{rotate:!d.value}])},[w(_(oe))],2)])]),e("div",{class:M(["chat-container",{collapsed:d.value}]),ref_key:"chatContainerRef",ref:p},[(t(!0),n($,null,j(s.value,H=>(t(),n("div",{key:H.id,class:M(["message-container",H.isUser?"user-message":"character-message"])},[H.hasAudio&&!H.isUser?(t(),n("div",Qe,"🔊")):x("",!0),e("div",We,[e("div",{class:"message-content",innerHTML:H.content},null,8,Xe)])],2))),128))],2),w(Re,{onSendMessage:y,onSelectOption:I,onSendVoice:U,onKeyboardToggle:B,onAiResponse:A,isCollapsed:d.value,lastUserMessage:s.value.length>0&&s.value.filter(H=>H.isUser).slice(-1)[0]||void 0,lastCharacterMessage:s.value.length>0&&s.value.filter(H=>!H.isUser).slice(-1)[0]||void 0},null,8,["isCollapsed","lastUserMessage","lastCharacterMessage"]),w(se),v.value?(t(),n("div",Ye,[e("div",{class:"confirm-content"},[m[2]||(m[2]=e("h3",null,"清除对话",-1)),m[3]||(m[3]=e("p",null,"确定要清除所有对话记录吗？此操作不可恢复。",-1)),e("div",{class:"confirm-buttons"},[e("button",{class:"cancel-button",onClick:o},"取消"),e("button",{class:"confirm-button",onClick:C},"确定")])])])):x("",!0)]))}}),Ge=P(qe,[["__scopeId","data-v-2116c0eb"]]),ts=g({__name:"ChatView",setup(c){return(f,s)=>(t(),D(Ge))}});export{ts as default};
