import{B as f}from"./BottomNav-BgdH27if.js";import{d as h,r as p,c as C,a as A,o as B,b as d,e as s,f as R,g as k,u as l,t as m,n as y,F as D,h as b,i as u,_ as O}from"./index-LffxJXfs.js";const n="/HerEcho/assets/one-DFvCpvHL.png",E=h("scenes",()=>{const S={scene1:{id:"scene1",title:"面对皇后的刁难，你应该怎么办？",image:n,canReplay:!0,options:[{id:"A",text:"暗中寻找机会反击皇后",nextSceneId:"scene2_engagement"},{id:"B",text:"揭发皇后的秘密",nextSceneId:"scene2_bathroom"},{id:"C",text:"你突然感到一股神秘的力量附身于你...",nextSceneId:"scene2_rescue"}]},scene2_engagement:{id:"scene2_engagement",title:"订婚宴上暗流涌动，你需要决定如何行动",image:n,description:"莱诺家族的订婚宴上，你察觉到了一些异常的气氛...",canReplay:!0,options:[{id:"A",text:"追击蒋伯驾",nextSceneId:"scene3A_spy"},{id:"B",text:"维持假面",nextSceneId:"scene3B_canary"},{id:"C",text:"收集情报",nextSceneId:"scene3C_intel"},{id:"D",text:"联系程聿怀",nextSceneId:"scene3D_rescue"}]},scene2_bathroom:{id:"scene2_bathroom",title:"你被困在了豪华浴室中，蒋伯驾正向你走来",image:n,description:"豪华的浴室成了你的囚牢，蒋伯驾正满面笑容地接近...",canReplay:!0,options:[{id:"A",text:"撕裂衬衫",nextSceneId:"scene3E_tattoo"},{id:"B",text:"呼救未遂",nextSceneId:"scene3F_silence"},{id:"C",text:"触碰伤痕",nextSceneId:"scene3G_memory"},{id:"D",text:"支票羞辱",nextSceneId:"scene3H_explosion"}]},scene2_rescue:{id:"scene2_rescue",title:"暴雨中的危险救援",image:n,description:"雨夜中，你被神秘人物所救，却也面临新的威胁...",canReplay:!0,options:[{id:"A",text:"孤身迎战",nextSceneId:"scene3I_journalist"},{id:"B",text:"身份质询",nextSceneId:"scene3J_revelation"},{id:"C",text:"拍摄特写",nextSceneId:"scene3K_blackmail"},{id:"D",text:"依赖体温",nextSceneId:"scene3L_key"}]},scene4_truth:{id:"scene4_truth",title:"最终的真相赌局",image:n,description:"一切谜团都将在这场危险的赌局中揭晓...",canReplay:!0,options:[{id:"A",text:"玉石俱焚",nextSceneId:"ending_phoenix"},{id:"B",text:"情绪崩溃",nextSceneId:"ending_puppet"},{id:"C",text:"制造混乱",nextSceneId:"ending_justice"}]},scene3A_spy:{id:"scene3A_spy",title:"你追踪蒋伯驾至天台，发现了惊人的秘密",image:n,description:"你跟踪至天台发现他与羌青瓷密谈莱诺家族阴谋...",canReplay:!0,options:[{id:"A",text:"继续调查",nextSceneId:"scene4_truth"},{id:"B",text:"隐藏退走",nextSceneId:"scene4_truth"}]},scene3B_canary:{id:"scene3B_canary",title:"你选择维持表面的平静，但代价是沉重的",image:n,description:"卢特起疑扣押程走柳护照，你陷入被控制的境地...",canReplay:!0,options:[{id:"A",text:"继续观察",nextSceneId:"ending_canary"},{id:"B",text:"寻找突破",nextSceneId:"scene4_truth"}]},ending_phoenix:{id:"ending_phoenix",title:"涅槃结局：浴火重生",image:n,description:"子弹穿透两人心脏引爆炸药库，尸骨中开出并蒂孤挺花...",canReplay:!0,options:[{id:"A",text:"重新开始",nextSceneId:"scene1"}]},ending_puppet:{id:"ending_puppet",title:"傀儡结局：失去自我",image:n,description:'被伯纳德注射致幻剂控制，成为新任"劳伦"替身...',canReplay:!0,options:[{id:"A",text:"重新开始",nextSceneId:"scene1"}]},ending_justice:{id:"ending_justice",title:"审判结局：正义得到伸张",image:n,description:"引爆天花板砸断伯纳德脊椎，轮椅上的伯纳德被撒该弟弟凌迟...",canReplay:!0,options:[{id:"A",text:"重新开始",nextSceneId:"scene1"}]},ending_canary:{id:"ending_canary",title:"金丝雀挽歌：沦为宣传工具",image:n,description:"你最终沦为莱诺家族的宣传工具，失去了自由...",canReplay:!0,options:[{id:"A",text:"重新开始",nextSceneId:"scene1"}]}},e=p("scene1"),r=C(()=>S[e.value]),a=p([]),t=p(new Set);function _(c){const g=r.value.options.find(I=>I.id===c);return a.value.push({sceneId:e.value,optionId:c}),e.value==="scene2_engagement"&&c==="A"&&t.value.add("spy_line"),g&&g.nextSceneId?(e.value=g.nextSceneId,!0):!1}function x(){console.log(`重播分镜: ${e.value}`)}function o(){e.value="scene1",a.value=[]}function i(c){return t.value.has(c)}return{currentSceneId:e,currentScene:r,userChoices:a,selectOption:_,replayCurrentScene:x,resetToStart:o,hasUnlockedSecret:i,unlockedSecrets:t}}),V={class:"dream-container"},j={class:"scene-image"},F=["src"],L={class:"question-container"},N={class:"question-text"},w=["onClick"],H={class:"option-prefix"},T={class:"option-text"},$=A({__name:"DreamView",setup(S){const e=E(),r=n;function a(o){const i=o.target;console.error("图片加载失败:",i.src),i.src=r}const t=p(!1);function _(o){t.value=!0,setTimeout(()=>{const i=e.selectOption(o);console.log(i?`跳转到分镜: ${e.currentSceneId}`:"无下一个场景，可能是结局或错误"),t.value=!1},800)}function x(){t.value=!0,e.replayCurrentScene(),setTimeout(()=>{t.value=!1},1500)}return B(()=>{console.log("当前场景图片URL:",e.currentScene.image),console.log("导入的图片:",n)}),(o,i)=>(u(),d("div",V,[s("div",{class:y(["scene-content",{playing:t.value}])},[s("div",j,[s("img",{src:l(n),alt:"分镜场景",class:"scene-img",onError:a},null,40,F)]),s("div",L,[s("div",N,m(l(e).currentScene.title),1)]),l(e).currentScene.canReplay?(u(),d("div",{key:0,class:"replay-button",onClick:x},i[0]||(i[0]=[s("span",{class:"replay-icon"},"▶",-1),s("span",{class:"replay-text"},"再看一遍",-1)]))):k("",!0),s("div",{class:y(["options-container",{disabled:t.value}])},[(u(!0),d(D,null,b(l(e).currentScene.options,c=>(u(),d("div",{key:c.id,class:"option-item",onClick:v=>!t.value&&_(c.id)},[s("div",H,m(c.id)+":",1),s("div",T,m(c.text),1)],8,w))),128))],2)],2),R(f)]))}}),z=O($,[["__scopeId","data-v-c1e682d5"]]);export{z as default};
