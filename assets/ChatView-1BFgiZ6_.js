import{d as c,e as f,l as I,u as K,c as a,o as s,a as e,k as p,t as M,_ as B,r as l,F as z,b as y,g as H,m as $,p as D,v as O,q as F,w as U,s as P,f as R,x as j,j as E,n as Q}from"./index-DnvA3loQ.js";import{B as W}from"./BottomNav-D8KieoPs.js";const q=Array.prototype.slice;function o(d,m=null,t=null){return(arguments.length>3||I(t))&&(t=q.call(arguments,2)),f(d,m,t)}const G=c({name:"RiAddCircleLine",props:{size:{type:String,default:"24px"},color:{type:String,default:"currentColor"},className:{type:String,default:""}},render(){return o("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:this.size,height:this.size,fill:this.color,class:["remixicon",this.className]},o("path",{d:"M11 11V7H13V11H17V13H13V17H11V13H7V11H11ZM12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20Z"}))}}),J=c({name:"RiArrowLeftSLine",props:{size:{type:String,default:"24px"},color:{type:String,default:"currentColor"},className:{type:String,default:""}},render(){return o("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:this.size,height:this.size,fill:this.color,class:["remixicon",this.className]},o("path",{d:"M10.8284 12.0007L15.7782 16.9504L14.364 18.3646L8 12.0007L14.364 5.63672L15.7782 7.05093L10.8284 12.0007Z"}))}}),X=c({name:"RiArrowUpSLine",props:{size:{type:String,default:"24px"},color:{type:String,default:"currentColor"},className:{type:String,default:""}},render(){return o("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:this.size,height:this.size,fill:this.color,class:["remixicon",this.className]},o("path",{d:"M11.9999 10.8284L7.0502 15.7782L5.63599 14.364L11.9999 8L18.3639 14.364L16.9497 15.7782L11.9999 10.8284Z"}))}}),Y=c({name:"RiKeyboardLine",props:{size:{type:String,default:"24px"},color:{type:String,default:"currentColor"},className:{type:String,default:""}},render(){return o("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:this.size,height:this.size,fill:this.color,class:["remixicon",this.className]},o("path",{d:"M3 17H21V19H3V17ZM3 11H6V14H3V11ZM8 11H11V14H8V11ZM3 5H6V8H3V5ZM13 5H16V8H13V5ZM18 5H21V8H18V5ZM13 11H16V14H13V11ZM18 11H21V14H18V11ZM8 5H11V8H8V5Z"}))}}),ee=c({name:"RiMessage2Line",props:{size:{type:String,default:"24px"},color:{type:String,default:"currentColor"},className:{type:String,default:""}},render(){return o("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:this.size,height:this.size,fill:this.color,class:["remixicon",this.className]},o("path",{d:"M6.45455 19L2 22.5V4C2 3.44772 2.44772 3 3 3H21C21.5523 3 22 3.44772 22 4V18C22 18.5523 21.5523 19 21 19H6.45455ZM5.76282 17H20V5H4V18.3851L5.76282 17ZM11 10H13V12H11V10ZM7 10H9V12H7V10ZM15 10H17V12H15V10Z"}))}}),se=c({name:"RiMic2Line",props:{size:{type:String,default:"24px"},color:{type:String,default:"currentColor"},className:{type:String,default:""}},render(){return o("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:this.size,height:this.size,fill:this.color,class:["remixicon",this.className]},o("path",{d:"M12.0001 3C10.3432 3 9.00008 4.34315 9.00008 6V12C9.00008 13.6569 10.3432 15 12.0001 15C13.6569 15 15.0001 13.6569 15.0001 12V6C15.0001 4.34315 13.6569 3 12.0001 3ZM12.0001 1C14.7615 1 17.0001 3.23858 17.0001 6V12C17.0001 14.7614 14.7615 17 12.0001 17C9.23865 17 7.00008 14.7614 7.00008 12V6C7.00008 3.23858 9.23865 1 12.0001 1ZM2.19238 13.9615L4.15392 13.5692C4.88321 17.2361 8.11888 20 12.0001 20C15.8813 20 19.1169 17.2361 19.8462 13.5692L21.8078 13.9615C20.8961 18.5452 16.8516 22 12.0001 22C7.14858 22 3.104 18.5452 2.19238 13.9615Z"}))}}),te=c({name:"RiMoreLine",props:{size:{type:String,default:"24px"},color:{type:String,default:"currentColor"},className:{type:String,default:""}},render(){return o("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:this.size,height:this.size,fill:this.color,class:["remixicon",this.className]},o("path",{d:"M4.5 10.5C3.675 10.5 3 11.175 3 12C3 12.825 3.675 13.5 4.5 13.5C5.325 13.5 6 12.825 6 12C6 11.175 5.325 10.5 4.5 10.5ZM19.5 10.5C18.675 10.5 18 11.175 18 12C18 12.825 18.675 13.5 19.5 13.5C20.325 13.5 21 12.825 21 12C21 11.175 20.325 10.5 19.5 10.5ZM12 10.5C11.175 10.5 10.5 11.175 10.5 12C10.5 12.825 11.175 13.5 12 13.5C12.825 13.5 13.5 12.825 13.5 12C13.5 11.175 12.825 10.5 12 10.5Z"}))}}),ae=c({name:"RiSearchLine",props:{size:{type:String,default:"24px"},color:{type:String,default:"currentColor"},className:{type:String,default:""}},render(){return o("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:this.size,height:this.size,fill:this.color,class:["remixicon",this.className]},o("path",{d:"M18.031 16.6168L22.3137 20.8995L20.8995 22.3137L16.6168 18.031C15.0769 19.263 13.124 20 11 20C6.032 20 2 15.968 2 11C2 6.032 6.032 2 11 2C15.968 2 20 6.032 20 11C20 13.124 19.263 15.0769 18.031 16.6168ZM16.0247 15.8748C17.2475 14.6146 18 12.8956 18 11C18 7.1325 14.8675 4 11 4C7.1325 4 4 7.1325 4 11C4 14.8675 7.1325 18 11 18C12.8956 18 14.6146 17.2475 15.8748 16.0247L16.0247 15.8748Z"}))}}),ie={class:"header-container"},oe={class:"role-name"},ne={class:"right-icons"},le=c({__name:"ChatHeader",props:{roleName:{type:String,default:"羌青瓷"}},setup(d){const m=K();function t(){m.go(-1)}return(h,r)=>(s(),a("div",ie,[e("div",{class:"back-button",onClick:t},[f(p(J))]),e("div",oe,M(d.roleName),1),e("div",ne,[f(p(ae),{class:"icon"}),f(p(te),{class:"icon"})])]))}}),de=B(le,[["__scopeId","data-v-78de291d"]]),re={key:0,class:"collapsed-messages"},ce={class:"user-message"},ve={class:"message-bubble"},ue=["innerHTML"],he={class:"character-message"},fe={key:0,class:"audio-icon"},ge={class:"message-bubble"},pe=["innerHTML"],me={class:"action-buttons"},ye={key:0,class:"recording-duration"},Ce={key:1,class:"options-panel"},_e=["onClick"],we={key:0,class:"virtual-keyboard"},ke=c({__name:"ChatInput",props:{isCollapsed:{type:Boolean,default:!1},lastUserMessage:{type:Object,default:null},lastCharacterMessage:{type:Object,default:null}},emits:["send-message","select-option","send-voice","keyboard-toggle"],setup(d,{emit:m}){const t=l(""),h=l(!1),r=l(!1),i=l(!1),v=l(0),C=l(null),_=l(!1),w=m,T=l(["我今天...有点想你。","真的吗？","你靠近一点..."]);function b(){t.value.trim()&&(w("send-message",t.value.trim()),t.value="",g())}function L(){h.value=!h.value,h.value&&g()}function V(u){w("select-option",u),h.value=!1}function k(){r.value=!r.value,r.value&&(t.value="",g())}function S(){r.value&&(i.value=!0,v.value=0,C.value=setInterval(()=>{v.value+=.1},100))}function Z(){i.value&&(i.value=!1,C.value&&(clearInterval(C.value),C.value=null),v.value>=.5&&w("send-voice",v.value),v.value=0)}function n(){r.value||(_.value=!0,w("keyboard-toggle",!0))}function g(){_.value&&(_.value=!1,w("keyboard-toggle",!1))}return(u,x)=>(s(),a(z,null,[e("div",{class:H(["input-container",{"keyboard-active":_.value}])},[d.isCollapsed&&d.lastUserMessage&&d.lastCharacterMessage?(s(),a("div",re,[e("div",ce,[e("div",ve,[e("div",{class:"message-content",innerHTML:d.lastUserMessage.content},null,8,ue)])]),e("div",he,[d.lastCharacterMessage.hasAudio?(s(),a("div",fe,"🔊")):y("",!0),e("div",ge,[e("div",{class:"message-content",innerHTML:d.lastCharacterMessage.content},null,8,pe)])])])):y("",!0),e("div",{class:H(["input-wrapper",{recording:i.value}])},[e("div",{class:"voice-icon",onClick:k},[r.value?(s(),$(p(Y),{key:1})):(s(),$(p(se),{key:0}))]),r.value?(s(),a("div",{key:1,class:"voice-input-area",onMousedown:S,onMouseup:Z,onTouchstart:U(S,["prevent"]),onTouchend:U(Z,["prevent"])},[P(M(i.value?"松开发送":"按住说话")+" ",1),i.value?(s(),a("div",ye,M(v.value.toFixed(1))+"s ",1)):y("",!0)],32)):(s(),a(z,{key:0},[D(e("input",{type:"text","onUpdate:modelValue":x[0]||(x[0]=N=>t.value=N),placeholder:"输入或选择消息发给TA，5s后自动回复",onKeyup:F(b,["enter"]),onFocus:n,onBlur:g},null,544),[[O,t.value]]),e("div",me,[e("div",{class:"chat-options",onClick:L},[f(p(ee))]),e("div",{class:"add-button",onClick:b},[f(p(G))])])],64))],2),h.value?(s(),a("div",Ce,[(s(!0),a(z,null,R(T.value,(N,A)=>(s(),a("div",{key:A,class:"option-item",onClick:Ae=>V(N)},M(N),9,_e))),128))])):y("",!0)],2),_.value?(s(),a("div",we,x[1]||(x[1]=[j('<div class="keyboard-row" data-v-f23d1604><div class="key" data-v-f23d1604>Q</div><div class="key" data-v-f23d1604>W</div><div class="key" data-v-f23d1604>E</div><div class="key" data-v-f23d1604>R</div><div class="key" data-v-f23d1604>T</div><div class="key" data-v-f23d1604>Y</div><div class="key" data-v-f23d1604>U</div><div class="key" data-v-f23d1604>I</div><div class="key" data-v-f23d1604>O</div><div class="key" data-v-f23d1604>P</div></div><div class="keyboard-row" data-v-f23d1604><div class="key" data-v-f23d1604>A</div><div class="key" data-v-f23d1604>S</div><div class="key" data-v-f23d1604>D</div><div class="key" data-v-f23d1604>F</div><div class="key" data-v-f23d1604>G</div><div class="key" data-v-f23d1604>H</div><div class="key" data-v-f23d1604>J</div><div class="key" data-v-f23d1604>K</div><div class="key" data-v-f23d1604>L</div></div><div class="keyboard-row" data-v-f23d1604><div class="key wide" data-v-f23d1604>Shift</div><div class="key" data-v-f23d1604>Z</div><div class="key" data-v-f23d1604>X</div><div class="key" data-v-f23d1604>C</div><div class="key" data-v-f23d1604>V</div><div class="key" data-v-f23d1604>B</div><div class="key" data-v-f23d1604>N</div><div class="key" data-v-f23d1604>M</div><div class="key wide" data-v-f23d1604>删除</div></div><div class="keyboard-row" data-v-f23d1604><div class="key" data-v-f23d1604>符号</div><div class="key" data-v-f23d1604>123</div><div class="key extra-wide" data-v-f23d1604>空格</div><div class="key wide" data-v-f23d1604>发送</div></div>',4)]))):y("",!0)],64))}}),Me=B(ke,[["__scopeId","data-v-f23d1604"]]),Ve="/HerEcho/assets/bg-CW6U9QZl.png",xe={class:"chat-page"},He=["src"],be={key:1,class:"scene-container"},Le={class:"scene-info"},Se={class:"scene-text"},Ze={class:"scene-stage"},Ne={class:"progress-section"},ze={class:"progress-bar"},Te={key:0,class:"audio-icon"},$e={class:"message-bubble"},Be=["innerHTML"],Ue=c({__name:"ChatPage",setup(d){const m=Ve,t=l([{id:1,content:'(摇晃着盛满白葡萄酒的高脚杯，背对着你靠在桌前。听到脚步声后歪了歪唇，没有回头，只是抿了一口杯中的酒，随后轻轻地把酒杯放在桌子上，轻声笑了) "牵，你来了。"',isUser:!1,hasAudio:!0},{id:2,content:"(伸手环住他的腰，将脸埋进他的后背)",isUser:!0,hasAudio:!1},{id:3,content:'(轻笑一声，没有挣开你的怀抱，只是拿起酒杯又抿了一口酒，随后转身面对着你，微微俯身凑近你，温热的呼吸洒在你的脸上) "今天怎么这么粘人？"',isUser:!1,hasAudio:!0},{id:4,content:'(伸手搭住他的膝子，凑近他的耳边轻声说) "我今天......有点想你。"',isUser:!0,hasAudio:!1},{id:5,content:'(喉结滚动，轻笑着将你推开一些，与你四目相对，眼中带着笑意) "哦？是吗？我还以为你巴不得离我远点呢。"',isUser:!1,hasAudio:!0}]),h={title:"（番外）你发现羌青瓷接近你别有目的",stage:"初步相识",progress:40},r=l(h.progress),i=l(!1),v=l(null),C=l(!1);function _(n){b(n),setTimeout(()=>{L()},1e3)}function w(n){b(n),setTimeout(()=>{L()},1e3)}function T(n){const g=`(发送了一条 ${n.toFixed(1)} 秒的语音消息)`;t.value.push({id:Date.now(),content:g,isUser:!0,hasAudio:!0}),V(),k(),setTimeout(()=>{const u=["(轻笑) 你的声音真好听...","(认真听完) 嗯...我明白了","(温柔地) 继续说下去，我在听...","(轻声) 你说的每一个字，我都记在心里..."],x=u[Math.floor(Math.random()*u.length)];t.value.push({id:Date.now(),content:x,isUser:!1,hasAudio:!0}),V(),k()},1500)}function b(n){t.value.push({id:Date.now(),content:n,isUser:!0,hasAudio:!1}),V(),k()}function L(){const n=["嗯？怎么了？有心事吗？","你今天看起来很不一样，告诉我发生了什么？","看着你的眼睛，我能感觉到你有话想说...","你靠得太近了，我的心跳有点加速...","今天的你，格外吸引我..."],g=n[Math.floor(Math.random()*n.length)];t.value.push({id:Date.now(),content:g,isUser:!1,hasAudio:!0}),V(),k()}function V(){r.value<95&&(r.value+=5)}function k(){setTimeout(()=>{v.value&&!i.value&&(v.value.scrollTop=v.value.scrollHeight)},100)}function S(){i.value=!i.value}function Z(n){C.value=n}return E(()=>{k()}),(n,g)=>(s(),a("div",xe,[f(de,{roleName:"羌青瓷"}),i.value?(s(),a("div",{key:0,class:H(["character-bg",{shrink:C.value}])},[e("img",{src:p(m),alt:"羌青瓷",class:"character-image"},null,8,He)],2)):y("",!0),i.value?y("",!0):(s(),a("div",be,[e("div",Le,[e("div",Se,"情节："+M(h.title),1),e("div",Ze,M(h.stage),1)]),e("div",Ne,[e("div",ze,[e("div",{class:"progress-fill",style:Q({width:`${r.value}%`})},null,4)])])])),e("div",{class:"toggle-bar",onClick:S},[e("span",null,M(i.value?"展开对话":"收起对话"),1),e("div",{class:H(["arrow-icon",{rotate:!i.value}])},[f(p(X))],2)]),e("div",{class:H(["chat-container",{collapsed:i.value}]),ref_key:"chatContainerRef",ref:v},[(s(!0),a(z,null,R(t.value,u=>(s(),a("div",{key:u.id,class:H(["message-container",u.isUser?"user-message":"character-message"])},[u.hasAudio&&!u.isUser?(s(),a("div",Te,"🔊")):y("",!0),e("div",$e,[e("div",{class:"message-content",innerHTML:u.content},null,8,Be)])],2))),128))],2),f(Me,{onSendMessage:_,onSelectOption:w,onSendVoice:T,onKeyboardToggle:Z,isCollapsed:i.value},null,8,["isCollapsed"]),f(W)]))}}),Re=B(Ue,[["__scopeId","data-v-002b8de1"]]),De=c({__name:"ChatView",setup(d){return(m,t)=>(s(),$(Re))}});export{De as default};
